# Сервер для учёта видеорегистраторов

Сервер для мобильного приложения для учёта и контроля выдачи видеорегистраторов в отделе АСКП ГУП "Мосгортранс".

## Технологии

- Spring Boot 4.0.1
- Spring Data JPA
- Spring Security
- PostgreSQL
- Docker

## Быстрый старт

### Требования

- Java 17+
- Maven 3.6+
- Docker и Docker Compose

### Запуск

1. **Запустите базу данных PostgreSQL в Docker:**
   ```bash
   docker-compose up -d
   ```

2. **Убедитесь, что база данных запущена:**
   ```bash
   docker-compose ps
   ```

3. **Запустите приложение:**
   ```bash
   mvn spring-boot:run
   ```

4. **Приложение будет доступно по адресу:** `http://localhost:8080`

### Остановка

Для остановки базы данных:
```bash
docker-compose down
```

Для остановки и удаления данных:
```bash
docker-compose down -v
```

## API Документация

Подробная документация API находится в файле [API.md](API.md).

## Тестирование

Для тестирования сервера используйте:
- **Инструкции по тестированию:** [TESTING.md](TESTING.md)
- **Автоматический скрипт (PowerShell):** `.\test-api.ps1`
- **Автоматический скрипт (Linux/Mac):** `./test-api.sh`

## Тестовый пользователь

После первого запуска автоматически создается пользователь:
- **Логин:** `admin`
- **Пароль:** `admin`

## Структура проекта

```
src/main/java/com/kirillus/backend/
├── config/          # Конфигурация (Security, DataInitializer)
├── controller/      # REST контроллеры
├── dto/            # Data Transfer Objects
├── entity/         # JPA сущности
├── exception/      # Обработка исключений
├── repository/     # JPA репозитории
├── security/       # Безопасность (фильтры, токены)
├── service/        # Бизнес-логика
└── util/           # Утилиты
```

## База данных

База данных запускается в Docker контейнере. При первом запуске приложения автоматически создаются:
- Все необходимые таблицы (через Hibernate ddl-auto=update)
- Роли пользователей (admin, operator)
- Тестовый пользователь (admin/admin)

## Разработка

Для разработки можно использовать встроенные инструменты Spring Boot DevTools, которые автоматически перезагружают приложение при изменении кода.

